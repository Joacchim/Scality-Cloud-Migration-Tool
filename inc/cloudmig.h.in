#ifndef __CLOUDMIG_H__
#define __CLOUDMIG_H__

#define CLOUDMIG_VERSION_MAJOR @CLOUDMIG_VERSION_MAJOR@
#define CLOUDMIG_VERSION_MINOR @CLOUDMIG_VERSION_MINOR@


/*
 * This macro allows defining your own format while prepending the program's
 * name.
 *
 * It considers that the whole format string should not be over 512 chars.
 * A buffer overflow is prevented by the use of the strncat function.
 *
 * We chose not to include the proper includes, and to let the source file (.c)
 * do it properly. The required includes are :
 * #include <stdio.h>
 * #include <string.h>
 */
#define PRINTERR(msg, ...)  do\
                            {\
                                char format[512] = {0};\
                                strcpy(format, "cloudmig: ");\
                                strncat(format, msg, 509);\
                                fprintf(stderr, format, __VA_ARGS__);\
                            } while (0)


/*
 * Defines the log level used for a message, and whether it should be
 * displayed or not.
 *
 * In any file manipulating the log level, this line must be added :
 * extern enum cloudmig_loglevel gl_loglevel;
 */
enum cloudmig_loglevel
{
    DEBUG_LVL,
    INFO_LVL,
    WARN_LVL
};


/*
 * Util functions
 */
void cloudmig_log(enum cloudmig_loglevel lvl, const char* format, ...);



/*
 * Required prototypes
 */
int retrieve_opts(int argc, char* argv[]);

#endif /* ! __CLOUDMIG_H__ */
